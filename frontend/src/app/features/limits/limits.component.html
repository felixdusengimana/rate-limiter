<h1>Global limits</h1>
<p class="muted">System-wide caps. Per-client limits are set by their subscription plan (see Plans).</p>

@if (error) {
  <p class="error-message">{{ error }}</p>
}

<form class="form" (ngSubmit)="create()">
  <div class="row">
    <label>Limit (requests)</label>
    <input type="number" [(ngModel)]="newRule.limitValue" name="limitValue" min="1" />
  </div>
  <div class="row">
    <label>Global window (seconds, optional)</label>
    <input type="number" [(ngModel)]="newRule.globalWindowSeconds" name="globalWindowSeconds" min="0" placeholder="e.g. 60 or leave empty for monthly" />
  </div>
  <button type="submit" [disabled]="creating">Add global limit</button>
</form>

@if (loading) {
  <p>Loadingâ€¦</p>
} @else {
  <ul class="list">
    @for (r of rules; track r.id) {
      <li class="card">
        <span class="type">{{ r.limitType }}</span>
        <span>{{ ruleLabel(r) }}</span>
        <span [class.badge]="true" [class.active]="r.active">{{ r.active ? 'Active' : 'Inactive' }}</span>
      </li>
    }
  </ul>
  @if (rules.length === 0) {
    <p class="muted">No rate limit rules yet.</p>
  }
}
